adalight-smart
-----------------

A sketch for arduino intended to be used by Hyperiond to drive my WS2812 leds.

Hyperion needs to be set with:
	* no gamma gorrection
	* no color correction
	* linear smoothing set this way:
		"type"            : "linear",
		"time_ms"         : 0,
		"updateFrequency" : 50.0000,
		"updateDelay"     : 0,
		"continuousOutput": true

This sketch performs:
	* Gamma and color correction by using prebuilt
	  gamma correction tables stored in PROGMEM
	* Scene change detection
	* slow fades between frames in the same scene
	* fast fades between frames when the scene changes
	* 4bit dithering to overcome WS2812 limitations when apply gamma correction


It works well, but at very low brightness it is still not 100% smooth.
In paticular i noted a kind of flickering that probably happens
when leds switches from off state to on state.
Possible workarounds:

a) Use different gamma tables that starts with color correction off
   and a linear ramp and ends with full color correction and
   proper destination gamma.  
   ...this gives smooth fades, but obviously it is a trade versus bad
   color fidelity when the color component value is low.
   this not only influences the low brightness colors, but also colors
   containing low value components (eg: FF03FF)

b) Use a threshold so that no smoothing is done if there is not "enough"
   change between colors.
   This way flickering should be gone.
 
